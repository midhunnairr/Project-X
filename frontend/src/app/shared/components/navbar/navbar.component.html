<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-left">
      <div class="logo">
        <span class="logo-text">GameX</span>
      </div>

      <div class="search-box" *ngIf="isLoggedIn">
        <input type="text" placeholder="Search" [(ngModel)]="searchQuery" (keyup.enter)="onSearch()"
          class="search-input" />
        <button class="search-button" (click)="onSearch()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
            <path
              d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Right Section: Logged OUT - Login Form -->
    <div class="navbar-right" *ngIf="!isLoggedIn">
      <form class="login-form" (ngSubmit)="onLogin()">
        <div class="form-field">
          <label for="email">Email</label>
          <input type="text" id="email" [(ngModel)]="loginData.email" name="email" class="login-input"
            placeholder="Email" />
        </div>

        <div class="form-field">
          <label for="password">Password</label>
          <input type="password" id="password" [(ngModel)]="loginData.password" name="password" class="login-input"
            placeholder="Password" />
        </div>

        <div class="form-field">
          <button type="submit" class="login-button">Log In</button>
        </div>
      </form>

      <button class="forgot-pwd-btn">Forgot Password?</button>
    </div>

    <!-- Right Section: Logged IN - Navigation Links and Icons -->
    <div class="navbar-right" *ngIf="isLoggedIn">
      <a class="nav-link" [routerLink]="['/home']">Home</a>
      <a class="nav-link" [routerLink]="['/profile']">Profile</a>
      <a class="nav-link" [routerLink]="['/friends']">Friends</a>

      <div class="nav-icons">
        <button class="icon-button" (click)="onNotificationClick()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C10.9 2 10 2.9 10 4V4.29C7.03 5.17 5 7.9 5 11V17L3 19V20H21V19L19 17V11C19 7.9 16.97 5.17 14 4.29V4C14 2.9 13.1 2 12 2ZM12 23C13.1 23 14 22.1 14 21H10C10 22.1 10.9 23 12 23Z" />
          </svg>
          <span class="badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </button>

        <button class="icon-button" (click)="onFriendRequestsClick()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M16 11C17.66 11 18.99 9.66 18.99 8C18.99 6.34 17.66 5 16 5C14.34 5 13 6.34 13 8C13 9.66 14.34 11 16 11ZM8 11C9.66 11 10.99 9.66 10.99 8C10.99 6.34 9.66 5 8 5C6.34 5 5 6.34 5 8C5 9.66 6.34 11 8 11ZM8 13C5.67 13 1 14.17 1 16.5V19H15V16.5C15 14.17 10.33 13 8 13ZM16 13C15.71 13 15.38 13.02 15.03 13.05C16.19 13.89 17 15.02 17 16.5V19H23V16.5C23 14.17 18.33 13 16 13Z" />
          </svg>
          <span class="badge" *ngIf="friendRequestCount > 0">{{ friendRequestCount }}</span>
        </button>

        <button class="icon-button account-button" (click)="toggleAccountMenu()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 5C13.66 5 15 6.34 15 8C15 9.66 13.66 11 12 11C10.34 11 9 9.66 9 8C9 6.34 10.34 5 12 5ZM12 19.2C9.5 19.2 7.29 17.92 6 15.98C6.03 13.99 10 12.9 12 12.9C13.99 12.9 17.97 13.99 18 15.98C16.71 17.92 14.5 19.2 12 19.2Z" />
          </svg>
          <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7 10L12 15L17 10H7Z" />
          </svg>
        </button>

        <!-- Account Dropdown Menu -->
        <div class="account-menu" *ngIf="showAccountMenu">
          <div class="menu-item" (click)="onViewProfile()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 5C13.66 5 15 6.34 15 8C15 9.66 13.66 11 12 11C10.34 11 9 9.66 9 8C9 6.34 10.34 5 12 5ZM12 19.2C9.5 19.2 7.29 17.92 6 15.98C6.03 13.99 10 12.9 12 12.9C13.99 12.9 17.97 13.99 18 15.98C16.71 17.92 14.5 19.2 12 19.2Z" />
            </svg>
            <span>View Profile</span>
          </div>
          <div class="menu-item" (click)="onSettings()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z" />
            </svg>
            <span>Settings</span>
          </div>
          <div class="menu-divider"></div>
          <div class="menu-item" (click)="onLogout()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M17 7L15.59 8.41L18.17 11H8V13H18.17L15.59 15.58L17 17L22 12L17 7ZM4 5H12V3H4C2.9 3 2 3.9 2 5V19C2 20.1 2.9 21 4 21H12V19H4V5Z" />
            </svg>
            <span>Log Out</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
